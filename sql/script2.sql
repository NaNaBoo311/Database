create TABLE categories (
    CATE_CODE   VARCHAR2(10) PRIMARY KEY,   -- Unique code for the category
    CATE_NAME   VARCHAR2(100) NOT NULL,  -- Name of the fabric category
    COLOR           VARCHAR2(50),            -- Color of the fabric
    QUANTITY        INTEGER NOT NULL   -- Quantity available
);

CREATE TABLE category_sellingprice (
  CATE_CODE VARCHAR2(10),
  CURRENT_PRICE   NUMBER NOT NULL,
  PRICE_DATE      DATE NOT NULL,
  IMPORT_DATE     DATE NOT NULL,
  CONSTRAINT FK_CATE_CODE FOREIGN KEY (CATE_CODE) REFERENCES categories(CATE_CODE)
);

CREATE TABLE bolts (
    BOLT_CODE VARCHAR(20) PRIMARY KEY,
    CATE_CODE VARCHAR(20),
    CONSTRAINT FK_CATE FOREIGN KEY (CATE_CODE) REFERENCES categories(CATE_CODE),
    LENGTH NUMBER(10,2)
);

CREATE TABLE suppliers (
    SUPP_CODE VARCHAR(10) PRIMARY KEY,
    SUPP_NAME VARCHAR(20) NOT NULL,
    PRT_CODE VARCHAR(20) NOT NULL,
    ADDRESS VARCHAR (200),
    BANK_ACCOUNT VARCHAR (200) UNIQUE, 
    TAX_CODE VARCHAR(20) UNIQUE
);

CREATE TABLE suppliers_phone (
    SUPPLIER_CODE VARCHAR(10),
    PHONE_NUM VARCHAR(15),
    PRIMARY KEY (SUPPLIER_CODE, PHONE_NUM),
    CONSTRAINT FK_SUPPLIER FOREIGN KEY (SUPPLIER_CODE) REFERENCES suppliers (SUPP_CODE)
);

CREATE TABLE managers (
    MNG_CODE VARCHAR(10) PRIMARY KEY,
    FIRST_NAME VARCHAR(20) NOT NULL,
    LAST_NAME VARCHAR(20) NOT NULL,
    ADDRESS VARCHAR(200) NOT NULL,
    GENDER  VARCHAR (10) NOT NULL,
    PHONE_NUM VARCHAR (20)
);

CREATE TABLE office_staffs (
    OFFI_CODE VARCHAR(10) PRIMARY KEY,
    FIRST_NAME VARCHAR(20) NOT NULL,
    LAST_NAME VARCHAR(20) NOT NULL,
    ADDRESS VARCHAR(200) NOT NULL,
    GENDER  VARCHAR (10) NOT NULL,
    PHONE_NUM VARCHAR (20)
);

CREATE TABLE operational_staffs (
    OPE_CODE VARCHAR(10) PRIMARY KEY,
    FIRST_NAME VARCHAR(20) NOT NULL,
    LAST_NAME VARCHAR(20) NOT NULL,
    ADDRESS VARCHAR(200) NOT NULL,
    GENDER  VARCHAR (10) NOT NULL,
    PHONE_NUM VARCHAR (20)
);

CREATE TABLE partner_staffs (
    PRT_CODE VARCHAR(10) PRIMARY KEY,
    FIRST_NAME VARCHAR(20) NOT NULL,
    LAST_NAME VARCHAR(20) NOT NULL,
    ADDRESS VARCHAR(200) NOT NULL,
    GENDER  VARCHAR (10) NOT NULL,
    PHONE_NUM VARCHAR (20)
);

CREATE TABLE customers (
    CUS_CODE VARCHAR(20) PRIMARY KEY,
    OFFI_CODE VARCHAR(20) NOT NULL,
    CONSTRAINT FK_OFFI FOREIGN KEY(OFFI_CODE) REFERENCES office_staffs(OFFI_CODE),
    FIRST_NAME VARCHAR(20) NOT NULL,
    LAST_NAME VARCHAR(20) NOT NULL,
    ARREARAGE_STATUS VARCHAR(10)
);

CREATE TABLE customers_phone (
    CUSTOMER_CODE VARCHAR(20),
    PHONE_NUM VARCHAR(20),
    PRIMARY KEY (CUSTOMER_CODE, PHONE_NUM),
    CONSTRAINT fk_cust FOREIGN KEY (CUSTOMER_CODE) REFERENCES customers (CUS_CODE)
);

CREATE TABLE orders (
    ORDER_CODE VARCHAR(20) PRIMARY KEY,
    CUS_CODE VARCHAR(20) NOT NULL,
    CONSTRAINT FK_CUS FOREIGN KEY (CUS_CODE) REFERENCES customers(CUS_CODE),
    OPE_CODE VARCHAR(20) NOT NULL,
    CONSTRAINT FK_OPE FOREIGN KEY (OPE_CODE) REFERENCES operational_staffs(OPE_CODE),
    TOTAL_PRICE NUMBER(10, 2) NOT NULL,
    ORDER_STATUS VARCHAR(20) NOT NULL,
    CANCELLED_REASON VARCHAR(30)
);

CREATE TABLE payments (
    ORDER_CODE VARCHAR2(20),
    CUS_CODE VARCHAR2(20),
    PRIMARY KEY (ORDER_CODE, CUS_CODE),
    CONSTRAINT fk_order FOREIGN KEY (ORDER_CODE) REFERENCES orders(ORDER_CODE),
    CONSTRAINT fk_customer FOREIGN KEY (CUS_CODE) REFERENCES customers(CUS_CODE),
    PAY_AMOUNT NUMBER(10,2) NOT NULL,
    PAY_DATE DATE NOT NULL,
    ARREARAGE NUMBER(10, 2) NOT NULL,
    DURATION VARCHAR2(50) NOT NULL 
);

CREATE TABLE contains (
    ORDER_CODE VARCHAR(20),
    BOLT_CODE VARCHAR(20),
    PRICE_DATE DATE,
    PRIMARY KEY (ORDER_CODE, BOLT_CODE),
    CONSTRAINT FK_BOLT FOREIGN KEY (BOLT_CODE) REFERENCES bolts(BOLT_CODE),
    CONSTRAINT ORDER_FK FOREIGN KEY (ORDER_CODE) REFERENCES orders(ORDER_CODE)
);
CREATE TABLE provides (
    CATE_CODE VARCHAR2(10),
    SUPP_CODE VARCHAR2(20),
    --CONSTRAINT CATE_FK FOREIGN KEY (CATE_CODE) REFERENCES categories(CATE_CODE),
    CONSTRAINT SUPP_FK FOREIGN KEY (SUPP_CODE) REFERENCES suppliers(SUPP_CODE),
    QUANTITY INTEGER NOT NULL,
    PURCHASE_PRICE NUMBER (10, 2) NOT NULL,
    IMPORT_DATE DATE NOT NULL,
    PRIMARY KEY (CATE_CODE, SUPP_CODE, IMPORT_DATE)
);

CREATE TABLE processes (
    OPE_CODE VARCHAR(20),
    ORDER_CODE VARCHAR (20),
    CONSTRAINT FOREGIN_OPE FOREIGN KEY (OPE_CODE) REFERENCES operational_staffs (OPE_CODE),
    CONSTRAINT FOREGIN_ORDER FOREIGN KEY (ORDER_CODE) REFERENCES orders (ORDER_CODE),
    PROC_DATE DATE,
    PROC_TIME TIMESTAMP,
    PRIMARY KEY (ORDER_CODE, PROC_DATE, PROC_TIME),
    ACTION VARCHAR(200)
);


CREATE OR REPLACE PROCEDURE increase_silk_price IS
BEGIN
    -- Update the selling price of Silk categories
    UPDATE category_sellingprice cs
    SET cs.CURRENT_PRICE = cs.CURRENT_PRICE * 1.10
    WHERE cs.CATE_CODE IN (
        SELECT c.CATE_CODE
        FROM categories c
        JOIN provides p ON c.CATE_CODE = p.CATE_CODE
        WHERE c.CATE_NAME = 'Silk'
            AND p.IMPORT_DATE >= TO_DATE('01-09-2020', 'DD-MM-YYYY')
    );
    COMMIT;
END;
/

CREATE OR REPLACE PROCEDURE get_order_from_silk_agency (
    result_cursor OUT SYS_REFCURSOR  -- Cursor parameter to return the result set
) IS
BEGIN
    OPEN result_cursor FOR
        SELECT o.ORDER_CODE, o.CUS_CODE, o.OPE_CODE, o.TOTAL_PRICE, o.ORDER_STATUS, o.CANCELLED_REASON
        FROM orders o
        INNER JOIN contains c ON c.ORDER_CODE = o.ORDER_CODE
        INNER JOIN bolts b ON b.BOLT_CODE = c.BOLT_CODE
        INNER JOIN provides p ON p.CATE_CODE = b.CATE_CODE
        INNER JOIN suppliers s ON s.SUPP_CODE = p.SUPP_CODE
        WHERE s.SUPP_NAME = 'Silk Agency';
END;
/

CREATE OR REPLACE FUNCTION total_purchase_price (supplier_code VARCHAR) 
RETURN SYS_REFCURSOR IS purchase_list SYS_REFCURSOR;
BEGIN
    OPEN purchase_list FOR
    SELECT 
        CATE_CODE AS Category_code,
        QUANTITY AS Quanity,
        PURCHASE_PRICE AS Price_per_unit,
        QUANTITY * PURCHASE_PRICE as Total_price,
        IMPORT_DATE AS Purchar_date,
        SUPP_CODE AS Supplier_code
    FROM
        provides
    WHERE
        SUPP_CODE = supplier_code;
    RETURN purchase_list;
END;
/

CREATE OR REPLACE PROCEDURE sort_suppliers_by_categories (start_date DATE, end_date DATE)
IS
    CURSOR sort_supplier IS
        SELECT
            SUPP_CODE AS Supplier_Code,
            COUNT(DISTINCT CATE_CODE) AS Num_Category
        FROM
            provides
        WHERE
            IMPORT_DATE BETWEEN start_date AND end_date
        GROUP BY
            SUPP_CODE
        ORDER BY
            Num_Category ASC;
            
    supplier_record sort_supplier%ROWTYPE;
BEGIN
    DBMS_OUTPUT.PUT_LINE('Supplier Code | Number of Categories');
    DBMS_OUTPUT.PUT_LINE('--------------------------------');
    OPEN sort_supplier;
    LOOP
        FETCH sort_supplier INTO supplier_record;
        EXIT WHEN sort_supplier%NOTFOUND;
        
        DBMS_OUTPUT.PUT_LINE(supplier_record.Supplier_Code || '           | ' || supplier_record.Num_Category);
    END LOOP;
    CLOSE sort_supplier;

END;
/
CREATE USER C##Manager IDENTIFIED BY P123;
GRANT CONNECT, RESOURCE, DBA TO C##Manager;


-----------------------OFFICE STAFFS--------------------------
INSERT INTO office_staffs (OFFI_CODE, FIRST_NAME, LAST_NAME, ADDRESS, GENDER, PHONE_NUM) VALUES ('OFFI001', 'Harry', 'Potter', '128 Hollywood, Chicago', 'Male', '+1(321)426-5121');
INSERT INTO office_staffs (OFFI_CODE, FIRST_NAME, LAST_NAME, ADDRESS, GENDER, PHONE_NUM) VALUES ('OFFI002', 'Emily', 'Blunt', '128 Broadway Ave, Chicago', 'Female', '+1(312)456-7890');
INSERT INTO office_staffs (OFFI_CODE, FIRST_NAME, LAST_NAME, ADDRESS, GENDER, PHONE_NUM) VALUES ('OFFI003', 'Robert', 'Downey', '742 Evergreen Terrace, Springfield', 'Male', '+1(217)555-1234');
INSERT INTO office_staffs (OFFI_CODE, FIRST_NAME, LAST_NAME, ADDRESS, GENDER, PHONE_NUM) VALUES ('OFFI004', 'Sophia', 'Williams', '67 Elm Street, Los Angeles', 'Female', '+1(818)789-4567');
INSERT INTO office_staffs (OFFI_CODE, FIRST_NAME, LAST_NAME, ADDRESS, GENDER, PHONE_NUM) VALUES ('OFFI005', 'Chris', 'Evans', '21 Baker Street, Boston', 'Male', '+1(617)234-5678');
INSERT INTO office_staffs (OFFI_CODE, FIRST_NAME, LAST_NAME, ADDRESS, GENDER, PHONE_NUM) VALUES ('OFFI006', 'Jessica', 'Alba', '456 Maple Drive, San Francisco', 'Female', '+1(415)987-6543');
INSERT INTO office_staffs (OFFI_CODE, FIRST_NAME, LAST_NAME, ADDRESS, GENDER, PHONE_NUM) VALUES ('OFFI007', 'Liam', 'Hemsworth', '12 Palm Lane, Miami', 'Male', '+1(305)876-5432');
INSERT INTO office_staffs (OFFI_CODE, FIRST_NAME, LAST_NAME, ADDRESS, GENDER, PHONE_NUM) VALUES ('OFFI008', 'Mia', 'Clark', '89 Pine Street, Denver', 'Female', '+1(303)654-3210');
INSERT INTO office_staffs (OFFI_CODE, FIRST_NAME, LAST_NAME, ADDRESS, GENDER, PHONE_NUM) VALUES ('OFFI009', 'Daniel', 'Craig', '101 Sunset Blvd, Los Angeles', 'Male', '+1(323)123-9876');
INSERT INTO office_staffs (OFFI_CODE, FIRST_NAME, LAST_NAME, ADDRESS, GENDER, PHONE_NUM) VALUES ('OFFI010', 'Olivia', 'Brown', '55 Lake View, Seattle', 'Female', '+1(206)890-1234');


-----------------------OPERATIONAL STAFFS--------------------------
INSERT INTO operational_staffs (OPE_CODE, FIRST_NAME, LAST_NAME, ADDRESS, GENDER, PHONE_NUM) VALUES ('OPE001', 'Michael', 'Smith', '23 Sunset Blvd, Miami', 'Male', '+1(305)678-1234');
INSERT INTO operational_staffs (OPE_CODE, FIRST_NAME, LAST_NAME, ADDRESS, GENDER, PHONE_NUM) VALUES ('OPE002', 'Laura', 'Johnson', '45 Pine Street, Denver', 'Female', '+1(303)456-7890');
INSERT INTO operational_staffs (OPE_CODE, FIRST_NAME, LAST_NAME, ADDRESS, GENDER, PHONE_NUM) VALUES ('OPE003', 'James', 'Brown', '67 Elm Avenue, Los Angeles', 'Male', '+1(818)789-4567');
INSERT INTO operational_staffs (OPE_CODE, FIRST_NAME, LAST_NAME, ADDRESS, GENDER, PHONE_NUM) VALUES ('OPE004', 'Emily', 'Davis', '12 Broadway Lane, Chicago', 'Female', '+1(312)654-3210');
INSERT INTO operational_staffs (OPE_CODE, FIRST_NAME, LAST_NAME, ADDRESS, GENDER, PHONE_NUM) VALUES ('OPE005', 'David', 'Wilson', '89 Maple Drive, San Francisco', 'Male', '+1(415)234-5678');
INSERT INTO operational_staffs (OPE_CODE, FIRST_NAME, LAST_NAME, ADDRESS, GENDER, PHONE_NUM) VALUES ('OPE006', 'Sarah', 'Miller', '101 Lake View Road, Seattle', 'Female', '+1(206)890-1234');
INSERT INTO operational_staffs (OPE_CODE, FIRST_NAME, LAST_NAME, ADDRESS, GENDER, PHONE_NUM) VALUES ('OPE007', 'Chris', 'Taylor', '34 Ocean Drive, Boston', 'Male', '+1(617)987-6543');
INSERT INTO operational_staffs (OPE_CODE, FIRST_NAME, LAST_NAME, ADDRESS, GENDER, PHONE_NUM) VALUES ('OPE008', 'Sophia', 'Martinez', '78 Palm Avenue, Miami', 'Female', '+1(305)876-5432');
INSERT INTO operational_staffs (OPE_CODE, FIRST_NAME, LAST_NAME, ADDRESS, GENDER, PHONE_NUM) VALUES ('OPE009', 'Liam', 'Anderson', '55 Forest Lane, Portland', 'Male', '+1(503)345-6789');
INSERT INTO operational_staffs (OPE_CODE, FIRST_NAME, LAST_NAME, ADDRESS, GENDER, PHONE_NUM) VALUES ('OPE010', 'Olivia', 'Thomas', '90 Cedar Street, Austin', 'Female', '+1(512)654-3210');

----------------------PARTNER STAFFS--------------------------------
INSERT INTO partner_staffs (PRT_CODE, FIRST_NAME, LAST_NAME, ADDRESS, GENDER, PHONE_NUM) VALUES ('PRT001', 'John', 'Doe', '123 Main Street, New York', 'Male', '+1(212)555-1234');
INSERT INTO partner_staffs (PRT_CODE, FIRST_NAME, LAST_NAME, ADDRESS, GENDER, PHONE_NUM) VALUES ('PRT002', 'Jane', 'Smith', '456 Oak Avenue, Chicago', 'Female', '+1(312)555-5678');
INSERT INTO partner_staffs (PRT_CODE, FIRST_NAME, LAST_NAME, ADDRESS, GENDER, PHONE_NUM) VALUES ('PRT003', 'William', 'Johnson', '789 Pine Road, San Francisco', 'Male', '+1(415)555-9012');
INSERT INTO partner_staffs (PRT_CODE, FIRST_NAME, LAST_NAME, ADDRESS, GENDER, PHONE_NUM) VALUES ('PRT004', 'Elizabeth', 'Brown', '101 Cedar Lane, Seattle', 'Female', '+1(206)555-3456');
INSERT INTO partner_staffs (PRT_CODE, FIRST_NAME, LAST_NAME, ADDRESS, GENDER, PHONE_NUM) VALUES ('PRT005', 'Matthew', 'Taylor', '202 Elm Street, Austin', 'Male', '+1(512)555-7890');
INSERT INTO partner_staffs (PRT_CODE, FIRST_NAME, LAST_NAME, ADDRESS, GENDER, PHONE_NUM) VALUES ('PRT006', 'Sophia', 'Davis', '303 Maple Boulevard, Miami', 'Female', '+1(305)555-4321');
INSERT INTO partner_staffs (PRT_CODE, FIRST_NAME, LAST_NAME, ADDRESS, GENDER, PHONE_NUM) VALUES ('PRT007', 'Lucas', 'Wilson', '404 Birch Court, Denver', 'Male', '+1(303)555-6543');
INSERT INTO partner_staffs (PRT_CODE, FIRST_NAME, LAST_NAME, ADDRESS, GENDER, PHONE_NUM) VALUES ('PRT008', 'Emily', 'Martinez', '505 Spruce Drive, Los Angeles', 'Female', '+1(818)555-8765');
INSERT INTO partner_staffs (PRT_CODE, FIRST_NAME, LAST_NAME, ADDRESS, GENDER, PHONE_NUM) VALUES ('PRT009', 'Alexander', 'Garcia', '606 Redwood Street, Portland', 'Male', '+1(503)555-0987');
INSERT INTO partner_staffs (PRT_CODE, FIRST_NAME, LAST_NAME, ADDRESS, GENDER, PHONE_NUM) VALUES ('PRT010', 'Olivia', 'Anderson', '707 Willow Way, Boston', 'Female', '+1(617)555-1230');

------------------------MANAGERS--------------------------------------
INSERT INTO managers (MNG_CODE, FIRST_NAME, LAST_NAME, ADDRESS, GENDER, PHONE_NUM) VALUES ('MNG001', 'Sarah', 'Johnson', '123 Park Avenue, New York', 'Female', '+1(212)456-7890');
INSERT INTO managers (MNG_CODE, FIRST_NAME, LAST_NAME, ADDRESS, GENDER, PHONE_NUM) VALUES ('MNG002', 'James', 'Anderson', '456 River Road, Los Angeles', 'Male', '+1(213)987-6543');
INSERT INTO managers (MNG_CODE, FIRST_NAME, LAST_NAME, ADDRESS, GENDER, PHONE_NUM) VALUES ('MNG003', 'Emma', 'Wilson', '789 Sunset Boulevard, Miami', 'Female', '+1(305)567-1234');
INSERT INTO managers (MNG_CODE, FIRST_NAME, LAST_NAME, ADDRESS, GENDER, PHONE_NUM) VALUES ('MNG004', 'Michael', 'Smith', '101 Ocean Drive, Chicago', 'Male', '+1(312)876-5432');
INSERT INTO managers (MNG_CODE, FIRST_NAME, LAST_NAME, ADDRESS, GENDER, PHONE_NUM) VALUES ('MNG005', 'Olivia', 'Brown', '202 Broadway Avenue, San Francisco', 'Female', '+1(415)234-5678');
INSERT INTO managers (MNG_CODE, FIRST_NAME, LAST_NAME, ADDRESS, GENDER, PHONE_NUM) VALUES ('MNG006', 'Ethan', 'Taylor', '303 Pine Street, Seattle', 'Male', '+1(206)543-2109');
INSERT INTO managers (MNG_CODE, FIRST_NAME, LAST_NAME, ADDRESS, GENDER, PHONE_NUM) VALUES ('MNG007', 'Sophia', 'Martinez', '404 Maple Lane, Denver', 'Female', '+1(303)678-9101');
INSERT INTO managers (MNG_CODE, FIRST_NAME, LAST_NAME, ADDRESS, GENDER, PHONE_NUM) VALUES ('MNG008', 'Liam', 'Harris', '505 Palm Street, Dallas', 'Male', '+1(214)789-4321');
INSERT INTO managers (MNG_CODE, FIRST_NAME, LAST_NAME, ADDRESS, GENDER, PHONE_NUM) VALUES ('MNG009', 'Isabella', 'Clark', '606 Elm Road, Atlanta', 'Female', '+1(404)567-8901');
INSERT INTO managers (MNG_CODE, FIRST_NAME, LAST_NAME, ADDRESS, GENDER, PHONE_NUM) VALUES ('MNG010', 'William', 'Roberts', '707 Cedar Avenue, Boston', 'Male', '+1(617)345-6789');



---------------------SUPPLIERS------------------------------------
INSERT INTO suppliers (SUPP_CODE, SUPP_NAME, PRT_CODE, ADDRESS, BANK_ACCOUNT, TAX_CODE) VALUES ('SUP001', 'Alpha Fabrics', 'PRT001', '123 Main Street, New York', 'US001234567890', 'TAXNY001');
INSERT INTO suppliers (SUPP_CODE, SUPP_NAME, PRT_CODE, ADDRESS, BANK_ACCOUNT, TAX_CODE) VALUES ('SUP002', 'Beta Textiles', 'PRT002', '456 Oak Avenue, Chicago', 'US002345678901', 'TAXCH002');
INSERT INTO suppliers (SUPP_CODE, SUPP_NAME, PRT_CODE, ADDRESS, BANK_ACCOUNT, TAX_CODE) VALUES ('SUP003', 'Gamma Threads', 'PRT003', '789 Pine Road, San Francisco', 'US003456789012', 'TAXSF003');
INSERT INTO suppliers (SUPP_CODE, SUPP_NAME, PRT_CODE, ADDRESS, BANK_ACCOUNT, TAX_CODE) VALUES ('SUP004', 'Delta Linens', 'PRT004', '101 Cedar Lane, Seattle', 'US004567890123', 'TAXSE004');
INSERT INTO suppliers (SUPP_CODE, SUPP_NAME, PRT_CODE, ADDRESS, BANK_ACCOUNT, TAX_CODE) VALUES ('SUP005', 'Epsilon Yarns', 'PRT005', '202 Elm Street, Austin', 'US005678901234', 'TAXAU005');
INSERT INTO suppliers (SUPP_CODE, SUPP_NAME, PRT_CODE, ADDRESS, BANK_ACCOUNT, TAX_CODE) VALUES ('SUP006', 'Zeta Fabrics', 'PRT006', '303 Maple Boulevard, Miami', 'US006789012345', 'TAXMI006');
INSERT INTO suppliers (SUPP_CODE, SUPP_NAME, PRT_CODE, ADDRESS, BANK_ACCOUNT, TAX_CODE) VALUES ('SUP007', 'Eta Textiles', 'PRT007', '404 Birch Court, Denver', 'US007890123456', 'TAXDE007');
INSERT INTO suppliers (SUPP_CODE, SUPP_NAME, PRT_CODE, ADDRESS, BANK_ACCOUNT, TAX_CODE) VALUES ('SUP008', 'Theta Threads', 'PRT008', '505 Spruce Drive, Los Angeles', 'US008901234567', 'TAXLA008');
INSERT INTO suppliers (SUPP_CODE, SUPP_NAME, PRT_CODE, ADDRESS, BANK_ACCOUNT, TAX_CODE) VALUES ('SUP009', 'Iota Linens', 'PRT009', '606 Redwood Street, Portland', 'US009012345678', 'TAXPO009');
INSERT INTO suppliers (SUPP_CODE, SUPP_NAME, PRT_CODE, ADDRESS, BANK_ACCOUNT, TAX_CODE) VALUES ('SUP010', 'Kappa Fabrics', 'PRT010', '707 Willow Way, Boston', 'US010123456789', 'TAXBO010');


---------------------SUPPLIERS PHONE NUMBER------------------------------------
INSERT INTO suppliers_phone (SUPPLIER_CODE, PHONE_NUM) VALUES ('SUP001', '+1-555-1234');
INSERT INTO suppliers_phone (SUPPLIER_CODE, PHONE_NUM) VALUES ('SUP001', '+1-555-5678');
INSERT INTO suppliers_phone (SUPPLIER_CODE, PHONE_NUM) VALUES ('SUP002', '+1-555-8765');
INSERT INTO suppliers_phone (SUPPLIER_CODE, PHONE_NUM) VALUES ('SUP002', '+1-555-4321');
INSERT INTO suppliers_phone (SUPPLIER_CODE, PHONE_NUM) VALUES ('SUP003', '+1-555-9101');
INSERT INTO suppliers_phone (SUPPLIER_CODE, PHONE_NUM) VALUES ('SUP004', '+1-555-1122');
INSERT INTO suppliers_phone (SUPPLIER_CODE, PHONE_NUM) VALUES ('SUP005', '+1-555-3344');
INSERT INTO suppliers_phone (SUPPLIER_CODE, PHONE_NUM) VALUES ('SUP006', '+1-555-5566');
INSERT INTO suppliers_phone (SUPPLIER_CODE, PHONE_NUM) VALUES ('SUP007', '+1-555-7788');
INSERT INTO suppliers_phone (SUPPLIER_CODE, PHONE_NUM) VALUES ('SUP008', '+1-555-9900');
INSERT INTO suppliers_phone (SUPPLIER_CODE, PHONE_NUM) VALUES ('SUP009', '+1-555-1133');
INSERT INTO suppliers_phone (SUPPLIER_CODE, PHONE_NUM) VALUES ('SUP010', '+1-555-2233');


-----------------------CATEGORY------------------------------------------
INSERT INTO categories (CATE_CODE, CATE_NAME, COLOR, QUANTITY) VALUES ('CATE001', 'Silk', 'Red', 5);
INSERT INTO categories (CATE_CODE, CATE_NAME, COLOR, QUANTITY) VALUES ('CATE002', 'Khaki', 'Beige', 2);
INSERT INTO categories (CATE_CODE, CATE_NAME, COLOR, QUANTITY) VALUES ('CATE003', 'Crewel', 'Blue', 4);
INSERT INTO categories (CATE_CODE, CATE_NAME, COLOR, QUANTITY) VALUES ('CATE004', 'Jacquard', 'Gold', 3);
INSERT INTO categories (CATE_CODE, CATE_NAME, COLOR, QUANTITY) VALUES ('CATE005', 'Faux Silk', 'Silver', 1);
INSERT INTO categories (CATE_CODE, CATE_NAME, COLOR, QUANTITY) VALUES ('CATE006', 'Damask', 'Green', 2);
INSERT INTO categories (CATE_CODE, CATE_NAME, COLOR, QUANTITY) VALUES ('CATE007', 'Silk', 'Green', 2);


INSERT INTO category_sellingprice VALUES('CATE001', 50.75, TO_DATE('02-09-2019', 'DD-MM-YYYY'), TO_DATE('01-08-2019', 'DD-MM-YYYY'));
INSERT INTO category_sellingprice VALUES('CATE002', 35.50, TO_DATE('27-11-2023', 'DD-MM-YYYY'), TO_DATE('20-11-2023', 'DD-MM-YYYY'));
INSERT INTO category_sellingprice VALUES('CATE003', 40.00, TO_DATE('26-11-2023', 'DD-MM-YYYY'), TO_DATE('21-11-2023', 'DD-MM-YYYY'));
INSERT INTO category_sellingprice VALUES('CATE004', 60.25, TO_DATE('25-05-2020', 'DD-MM-YYYY'), TO_DATE('13-04-2020', 'DD-MM-YYYY'));
INSERT INTO category_sellingprice VALUES('CATE005', 45.30, TO_DATE('24-11-2022', 'DD-MM-YYYY'), TO_DATE('02-05-2022', 'DD-MM-YYYY'));
INSERT INTO category_sellingprice VALUES('CATE006', 55.10, TO_DATE('23-11-2024', 'DD-MM-YYYY'), TO_DATE('10-11-2024', 'DD-MM-YYYY'));
INSERT INTO category_sellingprice VALUES('CATE007', 55.10, TO_DATE('2-11-2019', 'DD-MM-YYYY'), TO_DATE('01-09-2019', 'DD-MM-YYYY'));
INSERT INTO category_sellingprice VALUES('CATE001', 2500.00, TO_DATE('30-1-2021', 'DD-MM-YYYY'), TO_DATE('15-01-2021', 'DD-MM-YYYY'));

----------------------PROVIDES--------------------------------------------
INSERT INTO provides (CATE_CODE, SUPP_CODE, QUANTITY, PURCHASE_PRICE, IMPORT_DATE) VALUES ('CATE001', 'SUP001', 2, 40.00, TO_DATE('01-08-2019', 'DD-MM-YYYY'));
INSERT INTO provides (CATE_CODE, SUPP_CODE, QUANTITY, PURCHASE_PRICE, IMPORT_DATE) VALUES ('CATE001', 'SUP001', 5, 45.00, TO_DATE('15-01-2021', 'DD-MM-YYYY'));
INSERT INTO provides (CATE_CODE, SUPP_CODE, QUANTITY, PURCHASE_PRICE, IMPORT_DATE) VALUES ('CATE002', 'SUP002', 2, 36.50, TO_DATE('20-11-2023', 'DD-MM-YYYY'));
INSERT INTO provides (CATE_CODE, SUPP_CODE, QUANTITY, PURCHASE_PRICE, IMPORT_DATE) VALUES ('CATE003', 'SUP001', 4, 29.50, TO_DATE('21-11-2023', 'DD-MM-YYYY'));
INSERT INTO provides (CATE_CODE, SUPP_CODE, QUANTITY, PURCHASE_PRICE, IMPORT_DATE) VALUES ('CATE004', 'SUP003', 3, 64.25, TO_DATE('13-04-2020', 'DD-MM-YYYY'));
INSERT INTO provides (CATE_CODE, SUPP_CODE, QUANTITY, PURCHASE_PRICE, IMPORT_DATE) VALUES ('CATE005', 'SUP002', 1, 19.25, TO_DATE('02-05-2022', 'DD-MM-YYYY'));
INSERT INTO provides (CATE_CODE, SUPP_CODE, QUANTITY, PURCHASE_PRICE, IMPORT_DATE) VALUES ('CATE006', 'SUP004', 2, 24.25, TO_DATE('10-11-2024', 'DD-MM-YYYY'));
INSERT INTO provides (CATE_CODE, SUPP_CODE, QUANTITY, PURCHASE_PRICE, IMPORT_DATE) VALUES ('CATE007', 'SUP005', 1, 2000.00, TO_DATE('01-09-2019', 'DD-MM-YYYY'));

----------------------BOLTS-------------------------------------------
INSERT INTO bolts (BOLT_CODE, CATE_CODE, LENGTH) VALUES ('B001C001', 'CATE001', 10.0);
INSERT INTO bolts (BOLT_CODE, CATE_CODE, LENGTH) VALUES ('B002C001', 'CATE001', 2.5);
INSERT INTO bolts (BOLT_CODE, CATE_CODE, LENGTH) VALUES ('B003C001', 'CATE001', 4.65);
INSERT INTO bolts (BOLT_CODE, CATE_CODE, LENGTH) VALUES ('B004C001', 'CATE001', 4.12);
INSERT INTO bolts (BOLT_CODE, CATE_CODE, LENGTH) VALUES ('B005C001', 'CATE001', 6.1);
INSERT INTO bolts (BOLT_CODE, CATE_CODE, LENGTH) VALUES ('B006C001', 'CATE001', 9.12);
INSERT INTO bolts (BOLT_CODE, CATE_CODE, LENGTH) VALUES ('B007C001', 'CATE001', 5.42);
INSERT INTO bolts (BOLT_CODE, CATE_CODE, LENGTH) VALUES ('B001C002', 'CATE002', 11.20);
INSERT INTO bolts (BOLT_CODE, CATE_CODE, LENGTH) VALUES ('B002C002', 'CATE002', 4.4);
INSERT INTO bolts (BOLT_CODE, CATE_CODE, LENGTH) VALUES ('B001C003', 'CATE003', 7.71);
INSERT INTO bolts (BOLT_CODE, CATE_CODE, LENGTH) VALUES ('B002C003', 'CATE003', 3.14);
INSERT INTO bolts (BOLT_CODE, CATE_CODE, LENGTH) VALUES ('B003C003', 'CATE003', 2.72);
INSERT INTO bolts (BOLT_CODE, CATE_CODE, LENGTH) VALUES ('B004C003', 'CATE003', 4.85);
INSERT INTO bolts (BOLT_CODE, CATE_CODE, LENGTH) VALUES ('B001C004', 'CATE004', 4.16);
INSERT INTO bolts (BOLT_CODE, CATE_CODE, LENGTH) VALUES ('B002C004', 'CATE004', 7.65);
INSERT INTO bolts (BOLT_CODE, CATE_CODE, LENGTH) VALUES ('B003C004', 'CATE004', 10.24);
INSERT INTO bolts (BOLT_CODE, CATE_CODE, LENGTH) VALUES ('B001C005', 'CATE005', 4.85);
INSERT INTO bolts (BOLT_CODE, CATE_CODE, LENGTH) VALUES ('B001C006', 'CATE006', 8.92);
INSERT INTO bolts (BOLT_CODE, CATE_CODE, LENGTH) VALUES ('B002C006', 'CATE006', 6.14);
INSERT INTO bolts (BOLT_CODE, CATE_CODE, LENGTH) VALUES ('B001C007', 'CATE007', 100.00);
INSERT INTO bolts (BOLT_CODE, CATE_CODE, LENGTH) VALUES ('B002C007', 'CATE007', 100.00);
INSERT INTO bolts (BOLT_CODE, CATE_CODE, LENGTH) VALUES ('B003C007', 'CATE007', 100.00);


----------------------CUSTOMERS--------------------------------------
INSERT INTO customers (CUS_CODE, OFFI_CODE, FIRST_NAME, LAST_NAME, ARREARAGE_STATUS) VALUES ('CUS001', 'OFFI001', 'John', 'Wick', 'NORMAL');
INSERT INTO customers (CUS_CODE, OFFI_CODE, FIRST_NAME, LAST_NAME, ARREARAGE_STATUS) VALUES ('CUS002', 'OFFI002', 'Jane', 'Doe', 'NORMAL');
INSERT INTO customers (CUS_CODE, OFFI_CODE, FIRST_NAME, LAST_NAME, ARREARAGE_STATUS) VALUES ('CUS003', 'OFFI003', 'Bob', 'Johnson', 'NORMAL');
INSERT INTO customers (CUS_CODE, OFFI_CODE, FIRST_NAME, LAST_NAME, ARREARAGE_STATUS) VALUES ('CUS004', 'OFFI004', 'Dwayne', 'Johnson', 'NORMAL');
INSERT INTO customers (CUS_CODE, OFFI_CODE, FIRST_NAME, LAST_NAME, ARREARAGE_STATUS) VALUES ('CUS005', 'OFFI004', 'Gold', 'Roger', 'BAD DEBT');


---------------------CUSTOMERS PHONE NUMBERS--------------------------
INSERT INTO customers_phone (CUSTOMER_CODE, PHONE_NUM) VALUES ('CUS001', '+1-555-1234');
INSERT INTO customers_phone (CUSTOMER_CODE, PHONE_NUM) VALUES ('CUS002', '+1-555-5678');
INSERT INTO customers_phone (CUSTOMER_CODE, PHONE_NUM) VALUES ('CUS003', '+1-555-9101');
INSERT INTO customers_phone (CUSTOMER_CODE, PHONE_NUM) VALUES ('CUS004', '+1-555-2451');
INSERT INTO customers_phone (CUSTOMER_CODE, PHONE_NUM) VALUES ('CUS005', '+1-555-5912');


---------------------ORDERS------------------------------------------
INSERT INTO orders (ORDER_CODE, CUS_CODE, OPE_CODE, TOTAL_PRICE, ORDER_STATUS, CANCELLED_REASON) VALUES ('ORD001', 'CUS001', 'OPE001', 253.75, 'NEW', 'NULL');
INSERT INTO orders (ORDER_CODE, CUS_CODE, OPE_CODE, TOTAL_PRICE, ORDER_STATUS, CANCELLED_REASON) VALUES ('ORD002', 'CUS002', 'OPE002', 71.00, 'NEW', 'NULL');
INSERT INTO orders (ORDER_CODE, CUS_CODE, OPE_CODE, TOTAL_PRICE, ORDER_STATUS, CANCELLED_REASON) VALUES ('ORD003', 'CUS001', 'OPE001', 50.75, 'CANCELLED', 'OUT OF PRODUCTS');
INSERT INTO orders (ORDER_CODE, CUS_CODE, OPE_CODE, TOTAL_PRICE, ORDER_STATUS, CANCELLED_REASON) VALUES ('ORD004', 'CUS003', 'OPE003', 80.00, 'FULL_PAID', 'NULL');
INSERT INTO orders (ORDER_CODE, CUS_CODE, OPE_CODE, TOTAL_PRICE, ORDER_STATUS, CANCELLED_REASON) VALUES ('ORD005', 'CUS004', 'OPE004', 60.25, 'PARTIAL_PAID', 'NULL');
INSERT INTO orders (ORDER_CODE, CUS_CODE, OPE_CODE, TOTAL_PRICE, ORDER_STATUS, CANCELLED_REASON) VALUES ('ORD006', 'CUS005', 'OPE005', 2500.00, 'PARTIAL_PAID', 'NULL');

-----------------------CONTAINS--------------------------------------
INSERT INTO contains (ORDER_CODE, BOLT_CODE, PRICE_DATE) VALUES ('ORD001', 'B001C001', TO_DATE('30-01-2021', 'DD-MM-YYYY'));
INSERT INTO contains (ORDER_CODE, BOLT_CODE, PRICE_DATE) VALUES ('ORD001', 'B002C001', TO_DATE('30-01-2021', 'DD-MM-YYYY'));
INSERT INTO contains (ORDER_CODE, BOLT_CODE, PRICE_DATE) VALUES ('ORD001', 'B003C001', TO_DATE('30-01-2021', 'DD-MM-YYYY'));
INSERT INTO contains (ORDER_CODE, BOLT_CODE, PRICE_DATE) VALUES ('ORD001', 'B004C001', TO_DATE('30-01-2021', 'DD-MM-YYYY'));
INSERT INTO contains (ORDER_CODE, BOLT_CODE, PRICE_DATE) VALUES ('ORD001', 'B005C001', TO_DATE('30-01-2021', 'DD-MM-YYYY'));
INSERT INTO contains (ORDER_CODE, BOLT_CODE, PRICE_DATE) VALUES ('ORD002', 'B001C002', TO_DATE('27-11-2023', 'DD-MM-YYYY'));
INSERT INTO contains (ORDER_CODE, BOLT_CODE, PRICE_DATE) VALUES ('ORD002', 'B002C002', TO_DATE('27-11-2023', 'DD-MM-YYYY'));
INSERT INTO contains (ORDER_CODE, BOLT_CODE, PRICE_DATE) VALUES ('ORD003', 'B001C001', TO_DATE('30-01-2021', 'DD-MM-YYYY'));
INSERT INTO contains (ORDER_CODE, BOLT_CODE, PRICE_DATE) VALUES ('ORD004', 'B001C003', TO_DATE('26-11-2023', 'DD-MM-YYYY'));
INSERT INTO contains (ORDER_CODE, BOLT_CODE, PRICE_DATE) VALUES ('ORD004', 'B002C003', TO_DATE('26-11-2023', 'DD-MM-YYYY'));
INSERT INTO contains (ORDER_CODE, BOLT_CODE, PRICE_DATE) VALUES ('ORD005', 'B001C004', TO_DATE('29-05-2020', 'DD-MM-YYYY'));
INSERT INTO contains (ORDER_CODE, BOLT_CODE, PRICE_DATE) VALUES ('ORD006', 'B001C007', TO_DATE('02-09-2019', 'DD-MM-YYYY'));
INSERT INTO contains (ORDER_CODE, BOLT_CODE, PRICE_DATE) VALUES ('ORD006', 'B002C007', TO_DATE('02-09-2019', 'DD-MM-YYYY'));
INSERT INTO contains (ORDER_CODE, BOLT_CODE, PRICE_DATE) VALUES ('ORD006', 'B003C007', TO_DATE('02-09-2019', 'DD-MM-YYYY'));


--------------------PAYMENTS------------------------------------------
INSERT INTO payments(ORDER_CODE, CUS_CODE, PAY_AMOUNT, PAY_DATE, ARREARAGE, DURATION) VALUES ('ORD001', 'CUS001', '0.00', TO_DATE('30/01/2021', 'DD-MM-YYYY'), 253.75, '0 months 0 days');
INSERT INTO payments(ORDER_CODE, CUS_CODE, PAY_AMOUNT, PAY_DATE, ARREARAGE, DURATION) VALUES ('ORD002', 'CUS002', '0.00', TO_DATE('27/11/2023', 'DD-MM-YYYY'), 71.00, '0 months 0 days');
INSERT INTO payments(ORDER_CODE, CUS_CODE, PAY_AMOUNT, PAY_DATE, ARREARAGE, DURATION) VALUES ('ORD003', 'CUS001', '0.00', TO_DATE('30/01/2021', 'DD-MM-YYYY'), 00.00, '0 months 0 days');
INSERT INTO payments(ORDER_CODE, CUS_CODE, PAY_AMOUNT, PAY_DATE, ARREARAGE, DURATION) VALUES ('ORD004', 'CUS003', '80.00', TO_DATE('26/11/2023','DD-MM-YYYY'), 0.00, '0 months 0 days');
INSERT INTO payments(ORDER_CODE, CUS_CODE, PAY_AMOUNT, PAY_DATE, ARREARAGE, DURATION) VALUES ('ORD005', 'CUS004', '30.25', TO_DATE('30/05/2020','DD-MM-YYYY'), 30.00, '0 months 4 days');
INSERT INTO payments(ORDER_CODE, CUS_CODE, PAY_AMOUNT, PAY_DATE, ARREARAGE, DURATION) VALUES ('ORD006', 'CUS005', '300.00', TO_DATE('10/09/2019','DD-MM-YYYY'), 2200.00, '6 months 10 days');



DECLARE
    -- Declare any variables here (if needed)
BEGIN
    -- Perform the update operation
    UPDATE category_sellingprice cs
    SET cs.CURRENT_PRICE = cs.CURRENT_PRICE * 1.10
    WHERE cs.CATE_CODE IN (
        SELECT c.CATE_CODE
        FROM categories c
        JOIN provides p ON c.CATE_CODE = p.CATE_CODE
        WHERE c.CATE_NAME = 'Silk'
          AND cs.IMPORT_DATE >= TO_DATE('01-09-2020', 'DD-MM-YYYY')
    );

    -- Commit the changes (optional, if required)
    COMMIT;

EXCEPTION
    WHEN OTHERS THEN
        -- Handle any errors by rolling back changes
        ROLLBACK;
        DBMS_OUTPUT.PUT_LINE('An error occurred: ' || SQLERRM);
END;





